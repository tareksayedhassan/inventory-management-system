generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id               Int        @id @default(autoincrement())
  name             String
  email            String     @unique
  password         String
  role             Role       @default(USER)
  avatar           String?
  createdAt        DateTime   @default(now())
  updatedAt        DateTime   @updatedAt
  added_Company    Company[]  @relation("AddedBy")
  updated_Company  Company[]  @relation("UpdatedBy")
  added_Treasury   Treasury[] @relation("AddedBy")
  updated_Treasury Treasury[] @relation("UpdatedBy")
}

model Company {
  id            Int        @id @default(autoincrement())
  photo         String     @default("default.jpg")
  status        CompStatus @default(ACTIVE)
  general_alert String
  address       String
  phone         String
  company_code  String
  createdAt     DateTime   @default(now())
  updatedAt     DateTime   @updatedAt
  added_by_id   Int
  updated_by_id Int
  added_by      User       @relation("AddedBy", fields: [added_by_id], references: [id])
  updated_by    User       @relation("UpdatedBy", fields: [updated_by_id], references: [id])

  @@index([added_by_id], map: "Company_added_by_id_fkey")
  @@index([updated_by_id], map: "Company_updated_by_id_fkey")
}

model Treasury {
  id                           Int      @id @default(autoincrement())
  name                         String
  is_master                    Boolean
  last_exchange_receipt_number Int
  last_collect_receipt_number  Int
  createdAt                    DateTime @default(now())
  updatedAt                    DateTime @updatedAt
  added_by_id                  Int
  updated_by_id                Int
  date                         DateTime @default(now())
  added_by                     User     @relation("AddedBy", fields: [added_by_id], references: [id])
  updated_by                   User     @relation("UpdatedBy", fields: [updated_by_id], references: [id])

  @@index([added_by_id], map: "Treasury_added_by_id_fkey")
  @@index([updated_by_id], map: "Treasury_updated_by_id_fkey")
}

enum Role {
  USER
  ADMIN
}

enum CompStatus {
  ACTIVE
  INACTIVE
  PENDING
}
